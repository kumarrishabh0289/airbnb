{"ast":null,"code":"/**\n * @hidden\n */\nvar update = function update(arr, idx, value) {\n  return arr.slice(0, idx + 1).concat(arr.slice(idx + 1).map(function (x) {\n    return x + value;\n  }));\n};\n/**\n * @hidden\n */\n\n\nvar RowHeightService =\n/** @class */\nfunction () {\n  function RowHeightService(total, rowHeight, detailRowHeight) {\n    if (total === void 0) {\n      total = 0;\n    }\n\n    this.total = total;\n    this.rowHeight = rowHeight;\n    this.detailRowHeight = detailRowHeight;\n    this.offsets = [];\n    this.heights = [];\n    var agg = 0;\n\n    for (var idx = 0; idx < total; idx++) {\n      this.offsets.push(agg);\n      agg += rowHeight;\n      this.heights.push(rowHeight);\n    }\n  }\n\n  RowHeightService.prototype.height = function (rowIndex) {\n    return this.heights[rowIndex];\n  };\n\n  RowHeightService.prototype.expandDetail = function (rowIndex) {\n    if (this.height(rowIndex) === this.rowHeight) {\n      this.updateRowHeight(rowIndex, this.detailRowHeight);\n    }\n  };\n\n  RowHeightService.prototype.collapseDetail = function (rowIndex) {\n    if (this.height(rowIndex) > this.rowHeight) {\n      this.updateRowHeight(rowIndex, this.detailRowHeight * -1);\n    }\n  };\n\n  RowHeightService.prototype.index = function (position) {\n    for (var i = 0; i < this.offsets.length; i++) {\n      if (position === this.offsets[i]) {\n        return i;\n      }\n\n      if (position < this.offsets[i]) {\n        return i - 1;\n      }\n    }\n\n    return this.total - 1;\n  };\n\n  RowHeightService.prototype.offset = function (rowIndex) {\n    return this.offsets[rowIndex];\n  };\n\n  RowHeightService.prototype.totalHeight = function () {\n    return this.heights.reduce(function (prev, curr) {\n      return prev + curr;\n    }, 0);\n  };\n\n  RowHeightService.prototype.updateRowHeight = function (rowIndex, value) {\n    this.heights[rowIndex] += value;\n    this.offsets = update(this.offsets, rowIndex, value);\n  };\n\n  return RowHeightService;\n}();\n\nexport { RowHeightService };","map":null,"metadata":{},"sourceType":"module"}